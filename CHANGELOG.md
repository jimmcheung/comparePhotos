# 更新日志

所有项目的重要变更都将记录在此文件中。

## [1.1.7] - 2024-05-21

### 修复
- 修复浏览器环境下Buffer未定义错误，移除Node.js特有API依赖
- 增强HEIF/HEIC格式转换功能，添加多层降级处理机制
- 优化图像处理失败时的用户体验，提供友好的降级显示
- 添加自定义类型声明文件，解决第三方库类型问题
- 改进错误处理和日志记录，便于问题诊断

## [1.1.6] - 2024-05-21

### 修复
- 修复dcraw依赖库加载问题导致的504错误
- 添加dcraw库的包装层，避免直接依赖问题
- 配置Vite排除dcraw依赖的预优化，解决依赖加载错误
- 优化构建配置，提高大型依赖的加载性能
- 添加动态导入机制，提高应用稳定性

## [1.1.5] - 2024-05-21

### 修复
- 修复RAW格式处理时引起的服务器性能问题和挂起现象
- 优化dcraw库的使用，增加超时处理机制
- 添加缓存系统，避免重复处理相同的RAW文件
- 完善错误处理策略，确保程序在处理异常时能够平稳运行
- 修复格式转换过程中可能出现的环境变量问题

### 优化
- 改进HEIF和RAW转换功能，增加进度反馈
- 优化内存管理，避免资源泄漏
- 增强程序鲁棒性，在各种网络环境下均能稳定运行
- 设置最低npm版本要求，避免已知的性能问题

## [1.1.2] - 2024-05-20

### 优化
- 优化截图功能实现，使用dom-to-image替代屏幕捕获API，提供更简单友好的用户体验
- 取消截图时的授权提示和弹窗，实现一键截图无干扰体验
- 精确截取主内容区域，保持原始比例和样式
- 修复截图中图片拉伸和EXIF信息错位问题，确保视觉效果与实际呈现完全一致
- 改进截图方案及代码结构，简化实现方式，移除冗余代码
- 改进截图体验，提供更明确的用户反馈和错误处理

## [1.1.1] - 2024-06-XX

### 优化
- 优化截图功能实现，使用dom-to-image直接生成DOM截图，提供更简单友好的用户体验
- 取消截图时的授权提示和弹窗，实现一键截图无干扰体验
- 精确截取主内容区域，保持原始比例和样式
- 修复截图中图片拉伸和EXIF信息错位问题，确保视觉效果与实际呈现完全一致
- 改进截图体验，提供更明确的用户反馈和错误处理

### 新增
- 添加一键截图功能，支持截取当前页面并自动下载保存
- 截图文件命名为"照片对比_相机品牌型号_时间.png"，方便整理和识别
- 截图时自动隐藏控制按钮，保持视觉效果与演示模式一致

### 改进
- 优化显示设置弹窗的毛玻璃效果
- 修复标注工具栏的拖动和交互问题
- 优化文字标注的编辑体验
- 改进同步缩放和标注的交互逻辑

## [1.0.1] - 2024-06-03

### 改进
- 更新演示模式按钮图标，使用更现代化的全屏SVG图标
- 整体代码优化，移除冗余代码
- 更新文档和说明

## [未来计划]

### 计划中功能
- 添加隐私声明，在上传区域下方显示"所有图片仅在您的浏览器中本地处理，不会上传到任何服务器"
- 添加照片上绘制标记功能
- 同步绘制功能

### 待修复
- ExifSettings组件中的类型问题
- SettingsBar组件中的命名冲突问题

## [1.0.0] - 2024-05-17

### 初始版本发布
- 支持同时上传2-5张照片进行对比
- 同步缩放和平移操作
- 显示照片EXIF信息（相机型号、镜头、参数等）
- 支持深色/浅色主题切换
- 演示模式（全屏展示）
- 响应式设计，支持各种设备
- 图片懒加载，优化性能
- 本地存储用户偏好设置 

## [1.1.4] - UNRELEASED

### 改进
- 重构HEIF和RAW格式处理流程，增加转换确认交互
- 添加格式转换进度显示和清晰的状态反馈
- 优化错误处理机制，提供详细的错误信息
- 增强RAW格式预览和元数据提取能力
- 支持格式转换的批量处理和进度跟踪

### 修复
- 修复HEIF/HEIC格式转换失败的问题
- 修复RAW格式文件无法正确显示的问题
- 解决转换过程中可能出现的内存泄漏问题

## [1.1.3] - UNRELEASED

### 添加
- 增加对HEIF格式图像文件的完整支持
- 增加对主流相机厂商RAW格式文件的基础支持：
  - Sony ARW
  - Canon CR2/CR3
  - Nikon NEF
  - Fujifilm RAF
  - Panasonic RW2
  - Olympus ORF
  - Pentax PEF
  - Samsung SRW
  - Adobe DNG
  
### 改进
- 优化HEIC/HEIF文件处理流程
- RAW文件预览功能初始实现
- 改进错误处理和用户提示 