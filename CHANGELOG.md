# 更新日志

所有项目的重要变更都将记录在此文件中。

## [1.1.9] - 2024-06-XX
- 更新项目名称为 ComparePhotos
- 统一所有文件中的项目名称引用
- 更新 GitHub 仓库链接和部署地址
- 优化文档结构和说明

## [1.1.8] - 2024-06-XX
- 新增关键帧功能：支持多帧缩放/平移动画，自动记录、平滑切换、快捷键切换与自动播放
- 关键帧时间设置面板UI与功能优化：
  - 样式与显示设置面板统一，现代毛玻璃圆角弹窗
  - 停留时间、过渡时间为按钮组切换，选中高亮
  - 过渡时间选项为快（0.5秒）、正常（1秒，默认）、慢（3秒）
  - 过渡动画形式固定为缓入缓出
  - 弹窗位置在关键帧面板正上方，支持点击外部关闭
- 体验与交互全面升级，所有状态与UI联动，动画流畅

## [1.1.7] - 2024-05-21

### 修复
- 修复浏览器环境下Buffer未定义错误，移除Node.js特有API依赖
- 增强HEIF/HEIC格式转换功能，添加多层降级处理机制
- 优化图像处理失败时的用户体验，提供友好的降级显示
- 添加自定义类型声明文件，解决第三方库类型问题
- 改进错误处理和日志记录，便于问题诊断

### 优化
- 清理冗余代码，移除未使用的依赖、调试输出和无用注释
- HEIC/HEIF格式转换弹窗支持自定义输出格式（JPEG/PNG）和质量选择
- 优化弹窗文案，明确提示前端无法识别EXIF信息
- 深色模式等设置项支持localStorage持久化，刷新页面后自动恢复
- EXIF信息过滤更智能，空值/无效值自动隐藏
- "重新上传""添加图片"按钮体验与初始上传一致，保留各自特性
- 修复HEIC转换进度条不显示、弹窗提前关闭等交互问题

## [1.1.6] - 2024-05-21

### 修复
- 修复dcraw依赖库加载问题导致的504错误
- 添加dcraw库的包装层，避免直接依赖问题
- 配置Vite排除dcraw依赖的预优化，解决依赖加载错误
- 优化构建配置，提高大型依赖的加载性能
- 添加动态导入机制，提高应用稳定性

## [1.1.5] - 2024-05-21

### 修复
- 修复RAW格式处理时引起的服务器性能问题和挂起现象
- 优化dcraw库的使用，增加超时处理机制
- 添加缓存系统，避免重复处理相同的RAW文件
- 完善错误处理策略，确保程序在处理异常时能够平稳运行
- 修复格式转换过程中可能出现的环境变量问题

### 优化
- 改进HEIF和RAW转换功能，增加进度反馈
- 优化内存管理，避免资源泄漏
- 增强程序鲁棒性，在各种网络环境下均能稳定运行
- 设置最低npm版本要求，避免已知的性能问题

## [1.1.2] - 2024-05-20

### 优化
- 优化截图功能实现，使用dom-to-image替代屏幕捕获API，提供更简单友好的用户体验
- 取消截图时的授权提示和弹窗，实现一键截图无干扰体验
- 精确截取主内容区域，保持原始比例和样式
- 修复截图中图片拉伸和EXIF信息错位问题，确保视觉效果与实际呈现完全一致
- 改进截图方案及代码结构，简化实现方式，移除冗余代码
- 改进截图体验，提供更明确的用户反馈和错误处理

## [1.1.1] - 2024-06-XX
- 优化截图功能实现，使用dom-to-image直接生成DOM截图，提供更简单友好的用户体验
- 取消截图时的授权提示和弹窗，实现一键截图无干扰体验
- 精确截取主内容区域，保持原始比例和样式
- 修复截图中图片拉伸和EXIF信息错位问题，确保视觉效果与实际呈现完全一致
- 改进截图体验，提供更明确的用户反馈和错误处理

### 新增
- 添加一键截图功能，支持截取当前页面并自动下载保存
- 截图文件命名为"照片对比_相机品牌型号_时间.png"，方便整理和识别
- 截图时自动隐藏控制按钮，保持视觉效果与演示模式一致

### 改进
- 优化显示设置弹窗的毛玻璃效果
- 修复标注工具栏的拖动和交互问题
- 优化文字标注的编辑体验
- 改进同步缩放和标注的交互逻辑

## [1.0.1] - 2024-06-03
- 更新演示模式按钮图标，使用更现代化的全屏SVG图标
- 整体代码优化，移除冗余代码
- 更新文档和说明

## [未来计划]

### 计划中功能
- 添加隐私声明，在上传区域下方显示"所有图片仅在您的浏览器中本地处理，不会上传到任何服务器"
- 添加照片上绘制标记功能
- 同步绘制功能

### 待修复
- ExifSettings组件中的类型问题
- SettingsBar组件中的命名冲突问题

## [1.0.0] - 2024-05-17
- 支持同时上传2-5张照片进行对比
- 同步缩放和平移操作
- 显示照片 EXIF 信息（相机型号、镜头、参数等）
- 深色/浅色主题切换
- 演示模式（全屏展示）
- 响应式设计，支持各种设备
- 图片懒加载，优化性能
- 本地存储用户偏好设置 
- 标注功能（支持矩形、圆形、画笔、文字等标注）
- 关键帧功能（多帧缩放/平移动画，支持自动播放与自定义时间）

## [1.1.4] - UNRELEASED

### 改进
- 重构HEIF和RAW格式处理流程，增加转换确认交互
- 添加格式转换进度显示和清晰的状态反馈
- 优化错误处理机制，提供详细的错误信息
- 增强RAW格式预览和元数据提取能力
- 支持格式转换的批量处理和进度跟踪

### 修复
- 修复HEIF/HEIC格式转换失败的问题
- 修复RAW格式文件无法正确显示的问题
- 解决转换过程中可能出现的内存泄漏问题

## [1.1.3] - UNRELEASED

### 添加
- 增加对HEIF格式图像文件的完整支持
- 增加对主流相机厂商RAW格式文件的基础支持：
  - Sony ARW
  - Canon CR2/CR3
  - Nikon NEF
  - Fujifilm RAF
  - Panasonic RW2
  - Olympus ORF
  - Pentax PEF
  - Samsung SRW
  - Adobe DNG
  
### 改进
- 优化HEIC/HEIF文件处理流程
- RAW文件预览功能初始实现
- 改进错误处理和用户提示 

## [1.2.0] - 2024-06-XX
- 新增主题切换：支持浅色、深色、绿幕、蓝幕四种主题风格，用户可在设置面板中自由切换。
- 新增图片视窗圆角大小调整、图片间距调整，支持自定义输入、键盘上下键微调、一键恢复默认值。
- 设置面板UI优化，圆角/间距设置与EXIF、缩放等设置分组更清晰。
- 其它细节优化与体验提升。 